<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Random Quote</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/styles.b0cbc6ce.css">
</head>

<body>
  <div class="topnav" id="myTopnav">
    <a href="/index.html">Home</a>
    <a href="/views\random.html" class="active">Random</a>
    <a href="/views\search.html">Search</a>
    <a href="/views\add.html">Add</a>
    <a href="/views\favorites.html">Favorites</a>
    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
      <i class="fa fa-bars"></i>
    </a>
  </div>
  <main>
    <header>
      <h1>Random Quote Generator</h1>
    </header>
    <div id="random-quote">
    </div>
    <div id="options">
        <button onclick="saveQuote()" class="btn" id="saveButton" disabled="">Save</button>
        <button onclick="generateRandomQuote()" class="btn">Generate Random Quote</button>
    </div>
  </main>

  <script src="/random.424da3ff.js"></script>
  <script>function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function myFunction() {
  var x = document.getElementById("myTopnav");

  if (x.className === "topnav") {
    x.className += " responsive";
  } else {
    x.className = "topnav";
  }
}

var quoteController = {
  baseUrl: 'https://api.quotable.io/',
  randomQuote: function randomQuote() {
    var _this = this;

    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var url, response, data;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              url = _this.baseUrl + 'random';
              _context.next = 3;
              return fetch(url);

            case 3:
              response = _context.sent;
              _context.next = 6;
              return response.json();

            case 6:
              data = _context.sent;
              return _context.abrupt("return", data);

            case 8:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }))();
  }
};

function generateRandomQuote() {
  // Grab the content and author elements to fill with data
  var content = document.getElementById('content');
  var author = document.getElementById('author'); // Empty contents if generating new random quote

  var quote = quoteController.randomQuote();
  quote.then( // If the promise is fulfilled...
  function (value) {
    // Create quote using the value data
    content.innerHTML = value.content;
    author.innerHTML = "- " + value.author;
    localStorage.setItem('random-content', value.content);
    localStorage.setItem('random-author', value.author);
  }, // Otherwise...
  function (error) {
    console.log(error);
  });
  document.getElementById('saveButton').removeAttribute('disabled');
} // Save to favorites list


function saveQuote() {
  var favorites = JSON.parse(localStorage.getItem("favorites"));
  var newFav = {
    content: localStorage.getItem('random-content'),
    author: localStorage.getItem('random-author')
  };

  if (favorites.length > 0) {
    var gate = favorites.every(function (quote) {
      if (quote.author === newFav.author || quote.content === newFav.content) {
        return false;
      }

      return true;
    });

    if (gate === true) {
      favorites.push(newFav);
      localStorage.setItem('favorites', JSON.stringify(favorites));
    } else {
      console.log('Quote already on favorites list');
    }
  } else {
    favorites.push(newFav);
    localStorage.setItem('favorites', JSON.stringify(favorites));
  }

  console.log(favorites);
}</script>
</body>

</html>